{"version":3,"sources":["store/auth-context.js","components/layout/Layout.module.css","components/UI/LoadingSpinner.module.css","components/layout/MainNavigation.js","components/layout/Layout.js","App.js","index.js","components/UI/LoadingSpinner.js","components/layout/MainNavigation.module.css"],"names":["logoutTimer","AuthContext","React","createContext","token","isLoggedIn","login","logout","changePassword","calculateRemainingTime","expirationTime","currentTime","Date","getTime","AuthContextProvider","props","initialToken","tokenData","storedToken","localStorage","getItem","storedExpirationTime","remainingTime","removeItem","duration","retrieveStoredToken","useState","setToken","userIsLoggedIn","logoutHandler","useCallback","clearTimeout","useEffect","console","log","setTimeout","contextValue","setItem","Provider","value","children","module","exports","MainNavigation","authCtx","useContext","className","classes","header","logo","to","activeClassName","active","src","window","location","origin","alt","nav","href","onClick","Layout","main","App","NewQuote","lazy","NotFound","QuoteDetail","CategorizedQuotes","AuthPage","UserProfile","path","exact","render","fallback","LoadingSpinner","isMain","ReactDOM","document","getElementById","spinner"],"mappings":"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","file":"static/js/main.13bfec7f.chunk.js","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\r\n\r\nlet logoutTimer;\r\n\r\nconst AuthContext = React.createContext({\r\n    token: '',\r\n    isLoggedIn: false,\r\n    login: (token) => {},\r\n    logout: () => {},\r\n    changePassword: (token) => {}\r\n});\r\n\r\nconst calculateRemainingTime = (expirationTime) => {\r\n    const currentTime = new Date().getTime();\r\n    const adjExpirationTime = new Date(expirationTime).getTime();\r\n    const remainingTime = adjExpirationTime - currentTime;\r\n\r\n    return remainingTime;\r\n}\r\n\r\nconst retrieveStoredToken = () => {\r\n    const storedToken = localStorage.getItem('token');\r\n    const storedExpirationTime = localStorage.getItem('expirationTime');\r\n\r\n    const remainingTime = calculateRemainingTime(storedExpirationTime);\r\n    \r\n    //clear token if remaining time is 1 min - 60000 milliseconds\r\n    if(remainingTime <= 60000) {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('expirationTime');\r\n        return null;\r\n    }\r\n    return {\r\n        token: storedToken,\r\n        duration: remainingTime\r\n    }\r\n\r\n}\r\n\r\nexport const AuthContextProvider = (props) => {\r\n    const tokenData = retrieveStoredToken();\r\n    let initialToken;\r\n    if(tokenData) initialToken = tokenData.token;\r\n\r\n    const [token, setToken] = useState(initialToken);\r\n    const userIsLoggedIn = !!token;\r\n\r\n    const logoutHandler = useCallback(() => {\r\n        setToken(null);\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('expirationTime');\r\n\r\n        if(logoutTimer) clearTimeout(logoutTimer);\r\n    }, []);\r\n\r\n    const loginHandler = (token, expirationTime) => {\r\n        setToken(token);\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('expirationTime', expirationTime);\r\n        \r\n        const remainingTime = calculateRemainingTime(expirationTime);\r\n        logoutTimer = setTimeout(logoutHandler, remainingTime);\r\n\r\n    }\r\n\r\n    const changePasswordHandler = (token) => {\r\n        setToken(token);\r\n        localStorage.setItem('token', token);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(tokenData) {\r\n            console.log(tokenData);\r\n            \r\n            logoutTimer = setTimeout(logoutHandler, tokenData.duration);\r\n        }\r\n\r\n    }, [tokenData, logoutHandler]);\r\n\r\n    const contextValue = {\r\n        token: token,\r\n        isLoggedIn: userIsLoggedIn,\r\n        login: loginHandler,\r\n        logout: logoutHandler,\r\n        changePassword: changePasswordHandler\r\n    };\r\n\r\n    return <AuthContext.Provider value={contextValue}> {props.children} </AuthContext.Provider>;\r\n}\r\n\r\nexport default AuthContext;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Layout_main__3_Tnu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"LoadingSpinner_spinner__228SD\"};","import { useContext } from 'react';\r\nimport classes from './MainNavigation.module.css';\r\nimport { NavLink } from 'react-router-dom'\r\nimport AuthContext from '../../store/auth-context';\r\n\r\nconst MainNavigation = () => {\r\n    const authCtx = useContext(AuthContext);\r\n    const isLoggedIn = authCtx.isLoggedIn;\r\n\r\n    const logoutHandler = () => {\r\n        authCtx.logout();\r\n    }\r\n\r\n    return (\r\n        <header className={classes.header}>\r\n            <div className={classes.logo}> \r\n                <NavLink to=\"/quotes\" activeClassName={classes.active}>\r\n                    <img src={window.location.origin + '/logo.png'} alt=\"logo\" />\r\n                </NavLink>\r\n            </div>\r\n            <div className={classes.nav}>\r\n                <ul>\r\n                    <li>\r\n                        <NavLink to=\"/quotes\" activeClassName={classes.active}> All Quotes</NavLink>\r\n                    </li>\r\n                    <li>\r\n                        <NavLink to=\"/quotes/new\" activeClassName={classes.active}> Add a Quote</NavLink>\r\n                    </li>\r\n                    <li>\r\n                        <NavLink to=\"/quotes/generate\" activeClassName={classes.active}> Generate Quote</NavLink>\r\n                    </li>\r\n                    {!isLoggedIn && (<li> \r\n                        <NavLink to='/auth' activeClassName={classes.active}>Login</NavLink> \r\n                    </li>)}\r\n                    {isLoggedIn && (<li>\r\n                        <NavLink to='/profile' activeClassName={classes.active}>Profile</NavLink>\r\n                    </li>)}\r\n                    {isLoggedIn && (<li>\r\n                        <a href=\"/#\" onClick={logoutHandler}> Logout </a>\r\n                    </li>)}\r\n                </ul>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default MainNavigation;","import classes from './Layout.module.css';\r\nimport MainNavigation from './MainNavigation';\r\n\r\nconst Layout = ({children}) => {\r\n    return (\r\n        <div>\r\n            <MainNavigation />\r\n            <main className={classes.main}> {children} </main>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Layout;","import React, {Suspense, useContext} from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport Layout from './components/layout/Layout';\nimport LoadingSpinner from './components/UI/LoadingSpinner';\nimport AuthContext from './store/auth-context';\n\n\nfunction App() {\n\n  const NewQuote = React.lazy(() => import('./pages/NewQuote'));\n  const NotFound = React.lazy(() => import('./pages/NotFound'));\n  const QuoteDetail = React.lazy(() => import('./pages/QuoteDetail'));\n  const CategorizedQuotes = React.lazy(() => import('./pages/CategorizedQuotes'));\n  const AuthPage = React.lazy(() => import('./pages/AuthPage'));\n  const UserProfile = React.lazy(() => import('./pages/ProfilePage'));\n\n  const authCtx = useContext(AuthContext);\n  const isLoggedIn = authCtx.isLoggedIn;\n  return (\n    <Layout>\n      <Switch>\n        <Route path=\"/\" exact >\n          <Redirect to=\"/quotes\" />\n        </Route>\n        <Route path=\"/auth\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}>\n              { !isLoggedIn && <AuthPage /> }\n              { isLoggedIn && <Redirect to='/quotes' /> }\n            </Suspense>\n          )} />\n        <Route path=\"/profile\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}>\n              { isLoggedIn && <UserProfile />}\n              { !isLoggedIn && <Redirect to='/auth' />}\n            </Suspense>\n          )} />\n        <Route path=\"/quotes\" exact render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}><CategorizedQuotes isMain /></Suspense>\n          )} />\n        <Route path=\"/quotes/new\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}>\n              { isLoggedIn && <NewQuote />}\n              { !isLoggedIn && <Redirect to='/auth' />}\n            </Suspense>\n          )} />\n        <Route path=\"/quotes/generate\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}><QuoteDetail /></Suspense>\n          )} />\n        <Route path=\"/quotes/author/:authorName\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}><CategorizedQuotes /></Suspense>\n          )} />\n        <Route path=\"/quotes/genre/:genre\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}><CategorizedQuotes /></Suspense>\n          )} />\n        <Route path=\"/quotes/:quoteId\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}><QuoteDetail /></Suspense>\n          )} />\n        <Route path=\"*\" render={() => (\n            <Suspense fallback={<div className='centered'><LoadingSpinner /></div>}><NotFound /></Suspense>\n          )} />\n      </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport {BrowserRouter} from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './store/auth-context';\n\nReactDOM.render(\n        <AuthContextProvider> <BrowserRouter> <App /> </BrowserRouter> </AuthContextProvider>            \n        , document.getElementById('root'));\n","import classes from './LoadingSpinner.module.css';\n\nconst LoadingSpinner = () => {\n  return <div className={classes.spinner}></div>;\n}\n\nexport default LoadingSpinner;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__1AneB\",\"logo\":\"MainNavigation_logo__32qFk\",\"nav\":\"MainNavigation_nav__t0eOh\",\"active\":\"MainNavigation_active__3t4Ys\"};"],"sourceRoot":""}