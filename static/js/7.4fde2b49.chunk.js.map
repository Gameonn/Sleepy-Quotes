{"version":3,"sources":["components/Profile/ProfileForm.module.css","components/Profile/UserProfile.module.css","components/Profile/ProfileForm.js","components/Profile/UserProfile.js","pages/ProfilePage.js"],"names":["module","exports","ProfileForm","useState","isLoading","setIsLoading","authCtx","useContext","AuthContext","passwordInputRef","useRef","className","classes","form","onSubmit","e","preventDefault","password","enteredPassword","current","value","fetch","process","method","body","JSON","stringify","idToken","token","returnSecureToken","headers","then","res","ok","json","data","console","log","errorMessage","error","message","Error","changePassword","catch","err","alert","control","htmlFor","type","id","ref","action","LoadingSpinner","UserProfile","profile","ProfilePage"],"mappings":"sHACAA,EAAOC,QAAU,CAAC,KAAO,0BAA0B,QAAU,6BAA6B,OAAS,8B,mBCAnGD,EAAOC,QAAU,CAAC,QAAU,+B,iGCwDbC,EApDK,WAElB,MAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACMC,EAAUC,qBAAWC,KA2BrBC,EAAmBC,mBAQzB,OACE,uBAAMC,UAAWC,IAAQC,KAAMC,SARX,SAACC,GACrBA,EAAEC,iBACF,IA7BsBC,EA6BhBC,EAAkBT,EAAiBU,QAAQC,MACjDf,GAAa,GA9BSY,EA+BPC,EA9BfG,MAAM,iEAAD,OAAkEC,2CACvE,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CAAEC,QAASrB,EAAQsB,MAAOX,WAAUY,mBAAmB,IAC5EC,QAAS,CAAE,eAAgB,sBAC1BC,MAAK,SAAAC,GAEN,OADA3B,GAAa,GACV2B,EAAIC,GACED,EAAIE,OAEJF,EAAIE,OAAOH,MAAK,SAAAI,GACrBC,QAAQC,IAAIF,GAEZ,IAAIG,EAAe,kBAInB,MAHGH,GAAQA,EAAKI,OAASJ,EAAKI,MAAMC,UAClCF,EAAeH,EAAKI,MAAMC,SAEtB,IAAIC,MAAMH,MACfP,MAAK,SAAAI,GACN7B,EAAQoC,eAAeP,EAAKR,YAC3BgB,OAAM,SAAAC,GAAG,OAAIC,MAAMD,EAAIJ,gBAc9B,UACE,sBAAK7B,UAAWC,IAAQkC,QAAxB,UACE,uBAAOC,QAAQ,eAAf,0BACA,uBAAOC,KAAK,WAAWC,GAAG,eAAeC,IAAKzC,OAEhD,sBAAKE,UAAWC,IAAQuC,OAAxB,WACK/C,GAAa,qDACbA,GAAa,cAACgD,EAAA,EAAD,W,iBCvCTC,EATK,WAClB,OACE,0BAAS1C,UAAWC,IAAQ0C,QAA5B,UACE,mDACA,cAAC,EAAD,QCDSC,UAJK,WAClB,OAAO,cAAC,EAAD","file":"static/js/7.4fde2b49.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileForm_form__13lkt\",\"control\":\"ProfileForm_control__3sZ29\",\"action\":\"ProfileForm_action__21Eg0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__3lVJQ\"};","import { useState, useRef, useContext } from 'react';\nimport classes from './ProfileForm.module.css';\nimport AuthContext from '../../store/auth-context';\nimport LoadingSpinner from '../UI/LoadingSpinner';\n\nconst ProfileForm = () => {\n  \n  const [isLoading, setIsLoading] = useState(false);\n  const authCtx = useContext(AuthContext);\n  const changePassword = (password) => {\n    fetch(`https://identitytoolkit.googleapis.com/v1/accounts:update?key=${process.env.REACT_APP_API_KEY}`, \n    {\n      method: 'POST',\n      body: JSON.stringify({ idToken: authCtx.token, password, returnSecureToken: false  }),\n      headers: { 'Content-Type': 'application/json' }\n    }).then(res => {\n      setIsLoading(false);\n      if(res.ok) {\n        return res.json();\n      } else {\n        return res.json().then(data => {\n          console.log(data);\n          \n          let errorMessage = 'Updation Failed';\n          if(data && data.error && data.error.message) {\n            errorMessage = data.error.message;\n          }\n          throw new Error(errorMessage);\n        }).then(data => {\n          authCtx.changePassword(data.idToken);\n        }).catch(err => alert(err.message) );\n      }\n    })\n  }\n\n  const passwordInputRef = useRef();\n  const submitHandler = (e) => {\n    e.preventDefault();\n    const enteredPassword = passwordInputRef.current.value;\n    setIsLoading(true);\n    changePassword(enteredPassword)\n  }\n\n  return (\n    <form className={classes.form} onSubmit={submitHandler}>\n      <div className={classes.control}>\n        <label htmlFor='new-password'>New Password</label>\n        <input type='password' id='new-password' ref={passwordInputRef} />\n      </div>\n      <div className={classes.action}>\n        { !isLoading && <button>Change Password</button>}\n          {isLoading && <LoadingSpinner />}\n      </div>\n    </form>\n  );\n}\n\nexport default ProfileForm;\n","import ProfileForm from './ProfileForm';\nimport classes from './UserProfile.module.css';\n\nconst UserProfile = () => {\n  return (\n    <section className={classes.profile}>\n      <h2>Your User Profile</h2>\n      <ProfileForm />\n    </section>\n  );\n};\n\nexport default UserProfile;\n","import UserProfile from '../components/Profile/UserProfile';\n\nconst ProfilePage = () => {\n  return <UserProfile />;\n};\n\nexport default ProfilePage;\n"],"sourceRoot":""}